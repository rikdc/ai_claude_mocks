# Prompt-Only Mock Generation Example

This example demonstrates reliable mock generation using **strict prompting guidelines only** - no external tools or infrastructure required.

## Project Structure

```
prompt-only/
├── go.mod                              # Go module definition
├── CLAUDE.md                           # AI agent guidelines
├── README.md                           # This file
└── internal/
    ├── domain/
    │   └── user.go                     # Domain interfaces (UserRepository, EmailService, CacheService)
    └── service/
        ├── user_service.go             # Business logic implementation
        └── user_service_test.go        # Tests requiring mocks
```

## Interfaces That Need Mocking

This project contains three interfaces commonly requiring mocks in Go applications:

1. **`UserRepository`** - Data persistence operations
2. **`EmailService`** - Email sending functionality  
3. **`CacheService`** - Caching operations

## Current Test Status

The test file `internal/service/user_service_test.go` contains:
- ✅ Test structure with realistic scenarios
- ✅ Clear TODO comments indicating where mocks are needed
- ❌ **Missing mock implementations** (to be generated by AI)

## How It Works

1. **AI Agent reads CLAUDE.md** - Gets strict guidelines for mock generation
2. **AI analyzes interfaces** - Understands what needs to be mocked
3. **AI generates mocks** - Creates testify-compatible mocks following patterns
4. **AI implements tests** - Completes test cases with proper assertions

## Expected AI Generated Code

The AI should generate mock implementations that:

- Follow testify mock patterns: `mock.Mock` embedding
- Use proper naming: `MockUserRepository`, `MockEmailService`, etc.
- Include expectation methods: `On()`, `Return()`, `AssertExpectations()`
- Handle all interface methods correctly
- Include proper error scenarios and edge cases

## Validation

After AI generates mocks:

```bash
# Install dependencies
go mod tidy

# Run tests to verify mocks work correctly
go test ./internal/service/... -v

# Ensure all tests pass with generated mocks
```

## Benefits of This Approach

- **Simple**: No additional infrastructure or tools required
- **Universal**: Works with any AI agent that can read instructions
- **Fast**: Immediate mock generation without setup delays
- **Flexible**: Easy to modify prompting guidelines as needed

## Limitations

- **Consistency**: Relies on AI following instructions precisely
- **Validation**: Limited error checking of generated mocks
- **Complexity**: May struggle with very complex interfaces or patterns